<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Final Map</title>
		<link rel="stylesheet" href="src/nav/main.css">
		<style>
		/* Loading screen styles */
		#loadingScreen {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: black; /* Solid black background */
			color: white;
			display: flex;
			justify-content: center;
			align-items: center;
			font-size: 50px;
			z-index: 1000;
		}

		/* Welcome screen styles */
		#welcomeScreen {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.9);
			color: white;
			display: flex;
			justify-content: center;
			align-items: center;
			flex-direction: column;
			font-size: 50px;
			text-align: center;
			z-index: 1000;
			display: none; /* Initially hidden */
		}

		#welcomeScreen button {
			margin-top: 20px;
			padding: 10px 20px;
			font-size: 40px;
			background-color: #4caf50;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
		}

		#welcomeScreen button:hover {
			background-color: #45a049;
		}

		.cdfList, .cahli, .cobli, .codli, .coeli, .cohli, .comli, .conli, .cstli, .cotli, .facili {
			display: flex;
			align-items: center;
			justify-content: flex-start;
			padding: 15px;
			margin: 10px;
			border: 1px solid #ddd;
			border-radius: 8px;
			background-color: #f9f9f9;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			cursor: pointer;
			transition: transform 0.3s ease, box-shadow 0.3s ease;
		}

		.cdfList img, .facili img, .cahli img, .cobli img, .codli img, .coeli img, .cohli img, .comli img, .conli img, .cstli img, .cotli img {
			width: 60px;
			height: 60px;
			margin-right: 15px;
			border-radius: 8px;
			object-fit: cover;
		}

		.cdfList:hover, .facili:hover, .cahli:hover, .cobli:hover, .codli:hover, .coeli:hover, .cohli:hover, .comli:hover, .conli:hover, .cstli:hover, .cotli:hover {
			transform: translateY(-5px);
			box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
			background-color: #e6e6e6;
		}

		.cdfList:hover img, .facili:hover img, .cahli:hover img, .cobli:hover img, .codli:hover img, .coeli:hover img, .cohli:hover img, .comli:hover img, .conli:hover img, .cstli:hover img, .cotli:hover img {
			transform: scale(1.1);
			transition: transform 0.3s ease;
		}

		/* Sidebar styles */
		.sidebar {
			display: flex;
			flex-direction: row;
			gap: 10px;
		}

		/* Vertical layout for smaller screens */
		@media (max-width: 768px) {
			.sidebar {
				flex-direction: column;
				width: 100%;
			}

			.sidebar a {
				display: block;
				text-align: center;
				padding: 15px;
				margin: 5px 0;
				border: 1px solid #ddd;
				border-radius: 5px;
				background-color: #f9f9f9;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			}

			.sidebar a:hover {
				background-color: #e6e6e6;
			}
		}

		/* Instruction box styles */
		#instructionBox {
			position: absolute;
			top: 10px;
			right: 10px; /* Move to the top-right corner */
			background-color: rgba(0, 0, 0, 0.7); /* Slightly darker background */
			color: white;
			padding: 20px 25px; /* Larger padding */
			border-radius: 8px; /* Slightly larger border radius */
			font-size: 16px; /* Larger font size */
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Stronger shadow */
			z-index: 1001;
			display: none; /* Initially hidden */
		}

		#infoButton {
			position: absolute;
			top: 10px;
			right: 10px;
			width: 40px;
			height: 40px;
			background-color: rgba(0, 0, 0, 0.7);
			color: white;
			border: none;
			border-radius: 50%;
			font-size: 20px;
			font-weight: bold;
			display: none; /* Initially hidden */
			cursor: pointer;
			align-items: center;
			justify-content: center;
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
			z-index: 1002;
		}

		#infoButton:hover {
			background-color: rgba(0, 0, 0, 0.9);
		}

		/* Sidebar button styles */
		.sidebar button {
			width: 250px; /* Make the buttons longer */
			height: 70px; /* Make the buttons bigger */
			background-color: white; /* Change background to white */
			color: black; /* Change text color to black */
			border: none;
			border-radius: 35px; /* Ellipse shape */
			font-size: 20px; /* Larger font size */
			font-weight: bold;
			cursor: pointer;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
		}

		.sidebar button:hover {
			background-color: #f0f0f0; /* Slightly darker white on hover */
			transform: translateY(-5px) scale(1.05); /* Add hover animation */
			box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2); /* Enhance shadow on hover */
		}

		.sidebar button:active {
			transform: translateY(0) scale(1); /* Reset transform on click */
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
		}

		.collegelist {
			display: flex; /* Use flexbox for horizontal layout */
			flex-wrap: wrap; /* Allow wrapping to the next row if needed */
			gap: 15px; /* Add spacing between boxes */
			padding: 20px;
			justify-content: flex-start; /* Align boxes to the left */
		}

		.collegelist div {
			background-size: cover;
			background-position: center;
			border-radius: 10px;
			position: relative;
			display: flex;
			height: 100px; /* Adjust height for a longer appearance */
			width: 100%; /* Make the boxes stretch to fit the panel */
			justify-content: center;
			align-items: center;
			text-align: center;
			color: black; /* Change text color to black */
			font-size: 20px; /* Make the text bigger */
			font-weight: 900; /* Make the text bolder */
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			transition: transform 0.3s ease, box-shadow 0.3s ease;
		}

		.collegelist div:hover {
			transform: translateY(-5px);
			box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
		}

		/* Add fade-in and fade-out animations */
		.fade-in {
			animation: fadeIn 0.5s forwards;
		}

		.fade-out {
			animation: fadeOut 0.5s forwards;
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
			}
			to {
				opacity: 1;
			}
		}

		@keyframes fadeOut {
			from {
				opacity: 1;
			}
			to {
				opacity: 0;
			}
		}

		/* Watch Video Button Styles */
		#watchVideoButton {
			position: absolute;
			top: 60px; /* Positioned below the info button */
			right: 10px;
			width: 40px;
			height: 40px;
			background-color: red; /* Change background color to red */
			color: white;
			border: none;
			border-radius: 50%;
			font-size: 16px;
			font-weight: bold;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
			z-index: 1002;
		}

		#watchVideoButton:hover {
			background-color: darkred; /* Darker red on hover */
		}

		/* Video Modal Styles */
		#videoModal {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.8);
			display: none;
			justify-content: center;
			align-items: center;
			z-index: 1003;
		}

		#videoModal iframe {
			width: 80%;
			height: 80%;
			border: none;
			border-radius: 10px;
		}

		#videoModalClose {
			position: absolute;
			top: 20px;
			right: 20px;
			background-color: rgba(255, 255, 255, 0.8);
			color: black;
			border: none;
			border-radius: 50%;
			width: 30px;
			height: 30px;
			font-size: 20px;
			font-weight: bold;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
		}
		</style>
	</head>
	<body>

	<!-- Loading Screen -->
	<div id="loadingScreen">Loading, please wait...</div>

	<!-- Welcome Screen -->
	<div id="welcomeScreen">
		<img src="img/icons/aup logo.png">
		<p>WELCOME TO AUP 3D MAP:<br><br> ON EVER ONWARD!</p>
		<button id="enterButton">Enter</button>
	</div>

      <!-- This is the 3D Map -->
    <div id="experience" style=" background-color: rgba(0, 0, 0, 0.5);"> <!--background transparent?-->
          <canvas id="experience-canvas"></canvas>  
         <canvas id="experience-canvas"></canvas>  
    </div>
	<script type="importmap">
		{
		  "imports": {
			"three": "https://cdn.jsdelivr.net/npm/three@v0.175.0/build/three.module.js",
			"three/addons/": "https://cdn.jsdelivr.net/npm/three@v0.175.0/examples/jsm/"
		  }
		}
	  </script>
		  <script type="module" src="./src/main.js"></script>

    


    <div id="modelBuilding" style="display: none;" >
      <div id="backbtn">Back</div>
      <h1 id="buildingtitle"></h1>
      <div class="buildingSummary">
        <div class="buidlingImage"><img id="buildingImg" src="img/college_img/com.jpg"></div>
        <p id="buildingSummary"> 
          
        </p>
      </div>
    </div>

    <div id="building" style="display: none;">
      <canvas id="building-canva"></canvas>
    </div>

    
    

	<div id="dorm" class="collegelist" style="display: none;">
		<h3>Men's Dorm</h3>
		<div id="mahoganyli" class="cdfList">
			<img src="img/dorms/mahogany.jpg">
			<span>Mahogany</span>
		</div>
		<div id="acaciali" class="cdfList">
			<img src="img/dorms/acacia.jpg">
			<span>Acacia Residence Hall</span>
		</div>
		<div id="aptfli" class="cdfList">
			<img src="img/dorms/apartment_f.jpg">
			<span>Apartment F</span>
		</div>
		<div id="easternli" class="cdfList">
			<img src="img/dorms/eastern.jpg">
			<span>Eastern Residence Hall</span>
		</div>
		<div id="molaveli" class="cdfList">
			<img src="img/dorms/molave.jpg">
			<span>Molave</span>
		</div>
		<div id="aptali" class="cdfList">
			<img src="img/dorms/apartment_a.jpg">
			<span>Apartment As</span>
		</div>
		<h3>Ladies' Dorm</h3>
		<div id="sampali" class="cdfList">
			<img src="img/dorms/sampaguitaWW.jpg">
			<span>Sampaguita Hall</span>
		</div>
		<div id="cadenali" class="cdfList">
			<img src="img/dorms/cadena.jpg">
			<span>Cadena De Amor Hall</span>
		</div>
		<div id="damali" class="cdfList">
			<img src="img/dorms/dama.jpg">
			<span>Dama De Noche</span>
		</div>
		<div id="catli" class="cdfList">
			<img src="img/dorms/cattleya.jpg">
			<span>Cattleya</span>
		</div>
		<div id="walingli" class="cdfList">
			<img src="img/dorms/waling.jpg">
			<span>Waling-Waling Residence Hall</span>
		</div>
		<div id="ilangli" class="cdfList">
			<img src="img/dorms/ilang.jpg">
			<span>Ilang-Ilang</span>
		</div>
		<h3>Family / Graduate</h3>
		<div id="aptbli" class="cdfList">
			<img src="img/dorms/apartment_b.jpg">
			<span>Apartment B</span>
		</div>
		<div id="aptgli" class="cdfList">
			<img src="img/dorms/apartment_g.jpg">
			<span>Apartment G</span>
		</div>
		<div id="apthli" class="cdfList">
			<img src="img/dorms/apartment_h.jpg">
			<span>Apartment H</span>
		</div>
		<div id="apteli" class="cdfList">
			<img src="img/dorms/apartment_e.jpg">
			<span>Apartment E</span>
		</div>
	</div>

	<div id="college" class="collegelist" style="display: none;">
		<h2 style="color: black; font-weight: bold; text-align: center;">College Buildings</h2>
		<div id="cahli" class="cahli">
			<img src="img/colleges/cah.jpg">
			College of Arts and Humanities
		</div>
		<div id="cobli" class="cobli">
			<img src="img/colleges/cob.jpg">
			College of Business
		</div>
		<div id="codli" class="codli">
			<img src="img/colleges/cod.jpg">
			College of Dentistry
		</div>
		<div id="coeli" class="coeli">
			<img src="img/colleges/coe.jpg">
			College of Education
		</div>
		<div id="cohli" class="cohli">
			<img src="img/colleges/coh.jpg">
			College of Health
		</div>
		<div id="comli" class="comli">
			<img src="img/colleges/com.jpg">
			College of Medicine
		</div>
		<div id="conli" class="conli">
			<img src="img/colleges/con.jpg">
			College of Nursing
		</div>
		<div id="cstli" class="cstli">
			<img src="img/colleges/cst.jpg">
			College of Science and Technology
		</div>
		<div id="cotli" class="cotli">
			<img src="img/colleges/cot.jpg">
			College of Theology
		</div>
	</div>

	<div id="faci" class="collegelist" style="display: none;">
		<h2 style="text-align: center; margin-bottom: 20px;">AUP Facilities</h2>
		<div id="foodfac" class="facili">
			<img src="img/facilities/food_factory.jpg">
			AUP Food Factory
		</div>
		<div id="clinic" class="facili">
			<img src="img/facilities/clinic.jpg">
			AUP Health Service
		</div>
		<div id="store" class="facili">
			<img src="img/facilities/store.jpg">
			AUP Store
		</div>
		<div id="waterstation" class="facili">
			<img src="img/facilities/water_station.jpg">
			AUP Water Station
		</div>
		<div id="guidance" class="facili">
			<img src="img/facilities/guidance.jpg">
			Guidance Service Center
		</div>
		<div id="kubo" class="facili">
			<img src="img/facilities/kubo.jpg">
			Kubo
		</div>
		<div id="psd" class="facili">
			<img src="img/facilities/psd.jpg">
			Public Safety Department
		</div>
		<div id="ssc" class="facili">
			<img src="img/facilities/ssc.jpg">
			Student Service Center
		</div>
		<div id="Library" class="facili">
			<img src="img/facilities/library.jpg">
			AUP Library
		</div>
	</div>
	<script type="module" src="./src/nav/actionButton.js"></script>
 
  <!-- This is the Navigation -->
  <div id="sidebar" class="sidebar col-lg-3 col-md-6">
    <button id="collegebar">🏫 College Buildings</button>
    <button id="dormbar">🏢 Dormitories</button>
    <button id="facilitybar">🏠 Facilities</button>
  </div>

  <!-- Instruction Box -->
	<div id="instructionBox">
		Hold <strong>left click</strong> and drag the mouse to rotate around the map.<br>
		Hold <strong>right click</strong> and drag the mouse to explore the map.
	</div>

	<!-- Info Button -->
	<button id="infoButton">i</button>

	<!-- Watch Video Button -->
	<button id="watchVideoButton">▶</button>

	<!-- Video Modal -->
	<div id="videoModal">
		<button id="videoModalClose">×</button>
		<iframe src="" id="videoIframe" allow="autoplay; encrypted-media" allowfullscreen></iframe>
	</div>

    <script> 
      const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    
      if (isMobile) {
        window.location.href = "src/nav/noWeb.html";
      }
    </script>

		<script>
		// Simulate building rendering and hide the loading screen after rendering is complete
		function renderBuildings() {
			return new Promise((resolve) => {
				// Simulate a delay for rendering buildings (e.g., 3 seconds)
				setTimeout(() => {
					resolve();
				}, 3000); // Adjust this duration as needed
			});
		}

		// Show the instruction box after the loading screen is hidden
		window.addEventListener("load", async () => {
			const loadingScreen = document.getElementById("loadingScreen");
			const welcomeScreen = document.getElementById("welcomeScreen");
			const enterButton = document.getElementById("enterButton");
			const instructionBox = document.getElementById("instructionBox");
			const infoButton = document.getElementById("infoButton");

			// Wait for buildings to render
			await renderBuildings();

			// Hide the loading screen
			loadingScreen.style.display = "none";

			// Show the welcome screen
			welcomeScreen.style.display = "flex";

			// Show the instruction box
			instructionBox.style.display = "block";

			// Hide the welcome screen and instruction box when the enter button is clicked
			enterButton.addEventListener("click", () => {
				welcomeScreen.style.display = "none";
				instructionBox.style.display = "none";
				infoButton.style.display = "flex"; // Show the info button
			});

			// Toggle the instruction box visibility when the info button is clicked
			infoButton.addEventListener("click", () => {
				instructionBox.style.display = "block";
				infoButton.style.display = "none"; // Hide the info button

				// Add a click listener to hide the instruction box when clicking outside
				document.addEventListener("click", function hideInstructionBox(event) {
					if (!instructionBox.contains(event.target) && event.target !== infoButton) {
						instructionBox.style.display = "none";
						infoButton.style.display = "flex"; // Show the info button again
						document.removeEventListener("click", hideInstructionBox); // Remove the listener
					}
				});
			});
		});

		// Add fade-in and fade-out functionality
		function togglePanel(panelId) {
			const panel = document.getElementById(panelId);
			const allPanels = document.querySelectorAll('.collegelist');

			// Hide all panels
			allPanels.forEach((p) => {
				if (p !== panel && p.style.display === 'block') {
					p.classList.remove('fade-in');
					p.classList.add('fade-out');
					setTimeout(() => (p.style.display = 'none'), 500);
				}
			});

			// Show the selected panel
			if (panel.style.display === 'none' || panel.style.display === '') {
				panel.style.display = 'block';
				panel.classList.remove('fade-out');
				panel.classList.add('fade-in');

				// Add click listener to hide the panel when clicking outside
				setTimeout(() => {
					document.addEventListener('click', function hidePanel(event) {
						if (!panel.contains(event.target) && event.target.id !== `${panelId}bar`) {
							panel.classList.remove('fade-in');
							panel.classList.add('fade-out');
							setTimeout(() => (panel.style.display = 'none'), 500);
							document.removeEventListener('clissck', hidePanel);
						}
					});
				}, 0); // Delay to ensure the click event doesn't immediately trigger
			}
		}

		// Attach event listeners to sidebar buttons
		document.getElementById('collegebar').addEventListener('click', () => togglePanel('college'));
		document.getElementById('dormbar').addEventListener('click', () => togglePanel('dorm'));
		document.getElementById('facilitybar').addEventListener('click', () => togglePanel('faci'));

		// Watch Video Button Functionality
		const watchVideoButton = document.getElementById('watchVideoButton');
		const videoModal = document.getElementById('videoModal');
		const videoIframe = document.getElementById('videoIframe');
		const videoModalClose = document.getElementById('videoModalClose');

		watchVideoButton.addEventListener('click', () => {
			videoIframe.src = "https://www.youtube.com/embed/Nb5Cz-ayBx4"; // Updated video URL
			videoModal.style.display = "flex";
		});

		videoModalClose.addEventListener('click', () => {
			videoIframe.src = ""; // Stop the video
			videoModal.style.display = "none";
		});
	</script>
    
	<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>

	</body>
</html>
